# =============================================================================
# Dreams-RNS-ROCm: Local Mac test configuration
#
# Lightweight config for testing the pipeline locally on macOS (CPU only).
# Processes 1 CMF at a time, 10 shifts, 100 trajectories per shift.
# =============================================================================

# --- Run identity ---
run_name: "mac_local_test"
description: "Local Mac test: single CMF, 10 shifts, 100 trajectories"

# --- Target constants ---
targets:
  - name: "zeta3"
    value: 1.2020569031595942
  - name: "pi"
    value: 3.141592653589793
  - name: "e"
    value: 2.718281828459045

primary_target: "zeta3"

# --- RNS configuration ---
rns:
  K: 16                    # Fewer primes for fast local testing
  K_small: 4               # Primes for partial CRT delta proxy
  prime_method: "near_top"

# --- Walk configuration ---
walk:
  depth: 200               # Short walk for quick feedback
  snapshot_depths:
    - 50
    - 200
  normalize_every: 25

# --- Shifts ---
shifts:
  count: 10                # Only 10 shifts per CMF
  method: "grid"
  bounds: [-100, 100]
  seed: 42

# --- Trajectories ---
trajectories:
  count: 100               # 100 trajectories per shift
  max_component: 20
  ordering: "lexicographic"

# --- Distribution ---
distribution:
  mode: "cmf_per_gpu"
  work_queue: false
  checkpoint_every: 1

# --- Delta triage ---
triage:
  delta_threshold: -10.0   # Log everything (very permissive for testing)
  escalate_threshold: 0.0
  full_crt_dps: 50

# --- Output ---
output:
  base_dir: "./outputs"
  format: "jsonl"
  compress: false

# --- Performance ---
performance:
  topk: 10
  batch_size: 10

# --- CMF families (one at a time) ---
cmf_families:
  - name: "Apery_Zeta3_2x2"
    matrix:
      "0,0": "n**3"
      "0,1": "1"
      "1,0": "-(n+1)**6"
      "1,1": "34*n**3 + 51*n**2 + 27*n + 5"
    m: 2
    dim: 1
    axis_names: ["n"]
    directions: [1]
    target: "zeta3"
